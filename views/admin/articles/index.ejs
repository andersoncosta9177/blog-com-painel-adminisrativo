<%- include('../../partials/header.ejs'); %>
    <%- include('../../partials/navbar.ejs'); %>

<div class="container">
    <h2 class=" text-center text-primary display-5">Artigos</h2>
    <hr>
    <a href="/admin/articles/new" class="btn btn-success">Criar novo artigo</a>
    <a href="/admin/categories/new" class="btn btn-success float-end">Criar nova categoria</a>

    <hr>

    <table class="table table-bordered table-striped">
        <thead class="table-dark ">
            <tr>
                <th>ID</th>
                <th>TITLE</th>
                <th>SLUG</th>
                <th>CATEGORIA</th>
                <th>AÇÕES</th>
            </tr>
        </thead>
        <tbody>
            <% articles.forEach(article => { %>
           <tr>
            <td><%= article.id %> </td>
            <td><%= article.title %> </td>
            <td><%= article.slug %> </td>
            <td><%= article.category.title %> </td>
            <td>
                <form  onsubmit="confirmarDelecao(event,this)"  method="post" action="/articles/delete" style="display: inline;">

                    <input  type="hidden" name="id" value="<%= article.id %>">
                    <button class=" float-end btn btn-danger">Deletar</button>
                 </form>
             </td>
           </tr>
             
            <% }) %>
 
        </tbody>
    </table>
</div>
    <%-include('../../partials/footer.ejs'); %>

    <script>

function confirmarDelecao(event, form){
    event.preventDefault()
   var decision =  confirm("DESEJA DELETAR ARQUIVO?")
    if(decision){
       form.submit()
    }


}



    </script>