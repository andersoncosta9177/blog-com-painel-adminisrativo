<%- include('../../partials/header.ejs'); %>
    <%- include('../../partials/navbar.ejs'); %>

<div class="container">
    <h2 class=" text-center text-primary display-5">Categorias</h2>
    <hr>
    <a href="/admin/categories/new" class="btn btn-success">Criar nova categoria</a>
    <a href="/admin/articles/new" class="btn btn-success float-end">Criar novo artigo</a>

    <hr>

    <table class="table table-bordered table-striped">
        <thead class="table-dark ">
            <tr>
                <th>ID</th>
                <th>TITLE</th>
                <th>SLUG</th>
                <th>AÇÕES</th>
            </tr>
        </thead>
        <tbody>
          <% categories.forEach(category => { %>
            <tr>
             <td><%= category.id %> </td>
             <td><%= category.title %> </td>
             <td><%= category.slug %> </td>
             <td> 
                <a class="btn btn-warning" href="/admin/categories/edit/<%=category.id %> ">Editar</a>

                 <form  onsubmit="confirmarDelecao(event,this)"  method="post" action="/categories/delete" style="display: inline;">

                    <input  type="hidden" name="id" value="<%= category.id %>">
                    <button class=" float-end btn btn-danger">Deletar</button>
                 </form>

              </td>
            </tr>
        
          <% }) %>
        </tbody>
    </table>
</div>
    <%-include('../../partials/footer.ejs'); %>

    <script>

function confirmarDelecao(event, form){
    event.preventDefault()
   var decision =  confirm("DESEJA DELETAR ARQUIVO?")
    if(decision){
       form.submit()
    }


}



    </script>